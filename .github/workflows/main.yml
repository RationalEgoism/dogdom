name: Flutter PR

on:
  pull_request:
    branches:
    - master
jobs:
  build:
    runs-on: ubuntu-latest
    steps:

#      - uses: actions/setup-java@v2
#        with:
#          distribution: 'zulu'
#          java-version: '11'
#
#      - uses: subosito/flutter-action@v2
#        with:
#          channel: 'stable'
#          cache: true
#          cache-key: flutter # optional, change this to force refresh cache
#
#      - uses: actions/checkout@v2

      - name: Decode Keystore
        env:
          ENCODED_STRING: ${{ secrets.KEYSTORE }}
        run: |
          TMP_KEYSTORE_FILE_PATH="${RUNNER_TEMP}"/keystore
          echo ${TMP_KEYSTORE_FILE_PATH}
          mkdir "${TMP_KEYSTORE_FILE_PATH}"
          echo $ENCODED_STRING | base64 -di > "${TMP_KEYSTORE_FILE_PATH}"/keystore.jks

#      - run: flutter --version
#      - run: flutter pub get
#    # - run: flutter analyze
#    # - run: flutter test
#      - run: flutter build appbundle
#        env:
#          STORE_PASSWORD: ${{ secrets.STORE_PASSWORD }}
#          KEY_ALIAS: ${{ secrets.KEY_ALIAS }}
#          KEY_PASSWORD: ${{ secrets.KEY_PASSWORD }}
# /home/runner/work/dogdom/dogdom/android/app/keystore/keystore.jks